[gd_scene load_steps=20 format=3 uid="uid://cu4klmtr45gw0"]

[ext_resource type="Script" uid="uid://bsdteixewgjnn" path="res://scripts/game_maze.gd" id="1_jvsv4"]
[ext_resource type="Script" uid="uid://b18i4t8jf0d3j" path="res://addons/animatedbutton/AnimatedButton.gd" id="2_hlrt2"]
[ext_resource type="PackedScene" uid="uid://b28gtepbxlljo" path="res://scenes/dot.tscn" id="3_py8pd"]
[ext_resource type="Texture2D" uid="uid://cxpedg0by0dbv" path="res://assets/Dungeon_WallsAndFloors.png" id="3_v7xv8"]
[ext_resource type="PackedScene" uid="uid://51t0k6ylg0qd" path="res://scenes/pwoer_dot.tscn" id="4_8wpmx"]
[ext_resource type="PackedScene" uid="uid://b580vvpwu6u84" path="res://scenes/pacman.tscn" id="4_v7xv8"]
[ext_resource type="PackedScene" uid="uid://tdykqjvh1jcn" path="res://scenes/ghost_blinky.tscn" id="5_yvddi"]
[ext_resource type="PackedScene" uid="uid://dnqw26ychp7ng" path="res://scenes/ghost_clyde.tscn" id="6_qftkq"]
[ext_resource type="PackedScene" uid="uid://d170r6fdl4451" path="res://scenes/ghost_inky.tscn" id="7_58jo6"]
[ext_resource type="PackedScene" uid="uid://c8x26hub858s0" path="res://scenes/ghost_pinky.tscn" id="8_hk83x"]
[ext_resource type="AudioStream" uid="uid://53iopq4fyi1d" path="res://assets/sound_effects/game_start_count_down.mp3" id="10_hk83x"]
[ext_resource type="AudioStream" uid="uid://bt50do7jegk0e" path="res://assets/sound_effects/bgm_normal.wav" id="11_vf8bg"]
[ext_resource type="AudioStream" uid="uid://bech6mkgkx4jk" path="res://assets/sound_effects/dot_eaten.wav" id="13_y70hq"]
[ext_resource type="AudioStream" uid="uid://bccn1tlndf6sa" path="res://assets/sound_effects/power_dot_eaten.wav" id="14_b56ut"]
[ext_resource type="AudioStream" uid="uid://bjxol55w5rg84" path="res://assets/sound_effects/ghost_eaten.wav" id="15_b56ut"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_yvddi"]
texture = ExtResource("3_v7xv8")
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
3:1/0 = 0
4:1/0 = 0
5:1/0 = 0
0:2/0 = 0
1:2/0 = 0
2:2/0 = 0
3:2/0 = 0
4:2/0 = 0
5:2/0 = 0
0:3/0 = 0
0:3/0/physics_layer_1/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:3/0 = 0
2:3/0 = 0
3:3/0 = 0
4:3/0 = 0
5:3/0 = 0
0:4/0 = 0
0:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:4/0 = 0
1:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:4/0 = 0
2:4/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:4/0 = 0
4:4/0 = 0
5:4/0 = 0
0:5/0 = 0
0:5/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:5/0 = 0
1:5/0/physics_layer_1/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:5/0 = 0
2:5/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:5/0 = 0
4:5/0 = 0
5:5/0 = 0
0:6/0 = 0
0:6/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
1:6/0 = 0
1:6/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:6/0 = 0
2:6/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
3:6/0 = 0
4:6/0 = 0
5:6/0 = 0
0:7/0 = 0
1:7/0 = 0
2:7/0 = 0
3:7/0 = 0
4:7/0 = 0
5:7/0 = 0
0:8/0 = 0
1:8/0 = 0
2:8/0 = 0
3:8/0 = 0
4:8/0 = 0
5:8/0 = 0
0:9/0 = 0
1:9/0 = 0
2:9/0 = 0
3:9/0 = 0
4:9/0 = 0
5:9/0 = 0
0:10/0 = 0
1:10/0 = 0
2:10/0 = 0
3:10/0 = 0
4:10/0 = 0
5:10/0 = 0
0:11/0 = 0
1:11/0 = 0
2:11/0 = 0
3:11/0 = 0
4:11/0 = 0
5:11/0 = 0
0:12/0 = 0
1:12/0 = 0
2:12/0 = 0
3:12/0 = 0
4:12/0 = 0
5:12/0 = 0
0:13/0 = 0
1:13/0 = 0
2:13/0 = 0
3:13/0 = 0
4:13/0 = 0
5:13/0 = 0
0:14/0 = 0
1:14/0 = 0
1:14/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:14/0 = 0
3:14/0 = 0
4:14/0 = 0
5:14/0 = 0
0:15/0 = 0
1:15/0 = 0
2:15/0 = 0
3:15/0 = 0
4:15/0 = 0
5:15/0 = 0
0:16/0 = 0
1:16/0 = 0
2:16/0 = 0
3:16/0 = 0
4:16/0 = 0
5:16/0 = 0
0:17/0 = 0
1:17/0 = 0
1:17/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
2:17/0 = 0
3:17/0 = 0
4:17/0 = 0
5:17/0 = 0
0:18/0 = 0
1:18/0 = 0
2:18/0 = 0
3:18/0 = 0
4:18/0 = 0
5:18/0 = 0
0:19/0 = 0
1:19/0 = 0
2:19/0 = 0
3:19/0 = 0
3:19/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:19/0 = 0
4:19/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:19/0 = 0
5:19/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:20/0 = 0
1:20/0 = 0
2:20/0 = 0
3:20/0 = 0
3:20/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:20/0 = 0
5:20/0 = 0
5:20/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:21/0 = 0
1:21/0 = 0
2:21/0 = 0
3:21/0 = 0
3:21/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
4:21/0 = 0
4:21/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
5:21/0 = 0
5:21/0/physics_layer_0/polygon_0/points = PackedVector2Array(-8, -8, 8, -8, 8, 8, -8, 8)
0:22/0 = 0
1:22/0 = 0

[sub_resource type="TileSet" id="TileSet_qftkq"]
physics_layer_0/collision_layer = 1
physics_layer_1/collision_layer = 8
sources/0 = SubResource("TileSetAtlasSource_yvddi")

[sub_resource type="TileSetScenesCollectionSource" id="TileSetScenesCollectionSource_v7xv8"]
scenes/1/scene = ExtResource("3_py8pd")
scenes/2/scene = ExtResource("4_8wpmx")

[sub_resource type="TileSet" id="TileSet_yvddi"]
sources/0 = SubResource("TileSetScenesCollectionSource_v7xv8")

[node name="GameMaze" type="Control"]
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_jvsv4")

[node name="GameRecordUI" type="VBoxContainer" parent="."]
custom_minimum_size = Vector2(200, 80)
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 42.0
grow_horizontal = 2

[node name="Lives" type="HBoxContainer" parent="GameRecordUI"]
custom_minimum_size = Vector2(200, 30)
layout_mode = 2
size_flags_horizontal = 4

[node name="LabelTxt" type="Label" parent="GameRecordUI/Lives"]
layout_mode = 2
size_flags_horizontal = 0
theme_override_font_sizes/font_size = 30
text = "LIVES:"

[node name="LivesLabel" type="Label" parent="GameRecordUI/Lives"]
layout_mode = 2
size_flags_horizontal = 10
theme_override_font_sizes/font_size = 30
text = "1"

[node name="Score" type="HBoxContainer" parent="GameRecordUI"]
custom_minimum_size = Vector2(200, 30)
layout_mode = 2
size_flags_horizontal = 4

[node name="LabelTxt" type="Label" parent="GameRecordUI/Score"]
layout_mode = 2
size_flags_horizontal = 0
theme_override_font_sizes/font_size = 30
text = "SCORE:"

[node name="ScoreLabel" type="Label" parent="GameRecordUI/Score"]
layout_mode = 2
size_flags_horizontal = 10
theme_override_font_sizes/font_size = 30
text = "1"

[node name="Maze" type="Node2D" parent="."]
process_mode = 1
position = Vector2(448, 90)
scale = Vector2(2, 2)

[node name="FloorLayer" type="TileMapLayer" parent="Maze"]
tile_set = SubResource("TileSet_qftkq")

[node name="WallLayer" type="TileMapLayer" parent="Maze"]
tile_set = SubResource("TileSet_qftkq")

[node name="FoodLayer" type="TileMapLayer" parent="Maze"]
tile_set = SubResource("TileSet_yvddi")

[node name="BlinkyPathLine2D" type="Line2D" parent="Maze"]
position = Vector2(8, 8)
width = 1.0
default_color = Color(1, 0, 0, 1)

[node name="ClydePathLine2D" type="Line2D" parent="Maze"]
position = Vector2(8, 8)
width = 1.0
default_color = Color(1, 0.623529, 0, 1)

[node name="InkyPathLine2D" type="Line2D" parent="Maze"]
position = Vector2(8, 8)
width = 1.0
default_color = Color(0.183043, 0.796319, 0.953343, 1)

[node name="PinkyPathLine2D" type="Line2D" parent="Maze"]
position = Vector2(8, 8)
width = 1.0
default_color = Color(1, 0.623529, 1, 1)

[node name="Pacman" parent="Maze" instance=ExtResource("4_v7xv8")]

[node name="GhostBlinky" parent="Maze" node_paths=PackedStringArray("floor_layer", "wall_layer", "visual_path_line2d", "pacman_node") instance=ExtResource("5_yvddi")]
floor_layer = NodePath("../FloorLayer")
wall_layer = NodePath("../WallLayer")
visual_path_line2d = NodePath("../BlinkyPathLine2D")
pacman_node = NodePath("../Pacman")

[node name="GhostClyde" parent="Maze" node_paths=PackedStringArray("floor_layer", "wall_layer", "visual_path_line2d", "pacman_node") instance=ExtResource("6_qftkq")]
floor_layer = NodePath("../FloorLayer")
wall_layer = NodePath("../WallLayer")
visual_path_line2d = NodePath("../ClydePathLine2D")
pacman_node = NodePath("../Pacman")

[node name="GhostInky" parent="Maze" node_paths=PackedStringArray("blinky_node", "floor_layer", "wall_layer", "visual_path_line2d", "pacman_node") instance=ExtResource("7_58jo6")]
blinky_node = NodePath("../GhostBlinky")
floor_layer = NodePath("../FloorLayer")
wall_layer = NodePath("../WallLayer")
visual_path_line2d = NodePath("../InkyPathLine2D")
pacman_node = NodePath("../Pacman")

[node name="GhostPinky" parent="Maze" node_paths=PackedStringArray("floor_layer", "wall_layer", "visual_path_line2d", "pacman_node") instance=ExtResource("8_hk83x")]
floor_layer = NodePath("../FloorLayer")
wall_layer = NodePath("../WallLayer")
visual_path_line2d = NodePath("../PinkyPathLine2D")
pacman_node = NodePath("../Pacman")

[node name="BackToMainMenu" type="CenterContainer" parent="."]
process_mode = 2
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="ColorRect" type="ColorRect" parent="BackToMainMenu"]
custom_minimum_size = Vector2(800, 500)
layout_mode = 2
color = Color(1, 0.556863, 0.321569, 1)

[node name="VBoxContainer" type="VBoxContainer" parent="BackToMainMenu"]
custom_minimum_size = Vector2(800, 300)
layout_mode = 2
mouse_filter = 2

[node name="Label" type="Label" parent="BackToMainMenu/VBoxContainer"]
custom_minimum_size = Vector2(800, 300)
layout_mode = 2
theme_override_font_sizes/font_size = 75
text = "BACK TO 
MAIN MENU?"
horizontal_alignment = 1
vertical_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="BackToMainMenu/VBoxContainer"]
custom_minimum_size = Vector2(800, 100)
layout_mode = 2

[node name="Yes" type="Button" parent="BackToMainMenu/VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(353, 0)
layout_mode = 2
size_flags_horizontal = 6
focus_neighbor_left = NodePath("../No")
focus_neighbor_right = NodePath("../No")
theme_override_font_sizes/font_size = 60
text = "YES"
script = ExtResource("2_hlrt2")
metadata/_custom_type_script = "uid://b18i4t8jf0d3j"

[node name="No" type="Button" parent="BackToMainMenu/VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(353, 0)
layout_mode = 2
size_flags_horizontal = 6
focus_neighbor_left = NodePath("../Yes")
focus_neighbor_right = NodePath("../Yes")
theme_override_font_sizes/font_size = 60
text = "NO"
script = ExtResource("2_hlrt2")
metadata/_custom_type_script = "uid://b18i4t8jf0d3j"

[node name="Background" type="ColorRect" parent="."]
z_index = -4096
custom_minimum_size = Vector2(1920, 1080)
layout_mode = 0
offset_right = 1920.0
offset_bottom = 1080.0
mouse_filter = 2
color = Color(0, 0, 0, 1)

[node name="GameControlAP" type="AudioStreamPlayer" parent="."]
stream = ExtResource("10_hk83x")
bus = &"SFX"

[node name="BackgroundMusicAP" type="AudioStreamPlayer" parent="."]
stream = ExtResource("11_vf8bg")
bus = &"Music"

[node name="SFXDotEatenAP" type="AudioStreamPlayer" parent="."]
stream = ExtResource("13_y70hq")
bus = &"SFX"

[node name="SFXPowerDotEatenAP" type="AudioStreamPlayer" parent="."]
stream = ExtResource("14_b56ut")
bus = &"SFX"

[node name="SFXGhostEatenAP" type="AudioStreamPlayer" parent="."]
stream = ExtResource("15_b56ut")
bus = &"SFX"

[node name="FrightenedTimer" type="Timer" parent="."]
one_shot = true

[node name="ChaseTimer" type="Timer" parent="."]
wait_time = 20.0
one_shot = true

[node name="ScatterTimer" type="Timer" parent="."]
wait_time = 7.0
one_shot = true

[connection signal="pressed" from="BackToMainMenu/VBoxContainer/HBoxContainer/Yes" to="." method="_on_yes_button_pressed"]
[connection signal="pressed" from="BackToMainMenu/VBoxContainer/HBoxContainer/No" to="." method="_on_no_button_pressed"]
